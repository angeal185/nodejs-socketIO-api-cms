var utils=require("../utils"),nodes=require("../nodes"),Compiler=require("../visitor/compiler");(module.exports=function(r){r=utils.unwrap(r).nodes[0],utils.assertString(r);var e=this,i=r.string,n=arguments,s=1;return i=i.replace(/%(s|d)/g,function(r,i){var t=n[s++]||nodes.null;switch(i){case"s":return new Compiler(t,e.options).compile();case"d":if(t=utils.unwrap(t).first,"unit"!=t.nodeName)throw new Error("%d requires a unit");return t.val}}),new nodes.Literal(i)}).raw=!0;
