function parseObject(e){function t(e){switch(e.nodeName){case"object":return parseObject(e);case"boolean":return e.isTrue;case"unit":return e.type?e.toString():+e.val;case"string":case"literal":return e.val;default:return e.toString()}}e=e.vals;for(var r in e){var i=e[r].nodes[0].nodes;if(i&&i.length){e[r]=[];for(var n=0,s=i.length;n<s;++n)e[r].push(t(i[n]))}else e[r]=t(e[r].first)}return e}var utils=require("../utils"),path=require("path");module.exports=function(e,t){utils.assertString(e,"plugin"),t&&(utils.assertType(t,"object","options"),t=parseObject(t)),e=e.string;var r=utils.lookup(e,this.options.paths,this.options.filename);if(!r)throw new Error('failed to locate plugin file "'+e+'"');var i=require(path.resolve(r));if("function"!=typeof i)throw new Error('plugin "'+e+'" does not export a function');this.renderer.use(i(t||this.options))};
