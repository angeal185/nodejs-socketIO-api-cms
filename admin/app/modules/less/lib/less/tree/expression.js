var Node=require("./node"),Paren=require("./paren"),Comment=require("./comment"),Expression=function(e){if(this.value=e,!e)throw new Error("Expression requires an array parameter")};Expression.prototype=new Node,Expression.prototype.type="Expression",Expression.prototype.accept=function(e){this.value=e.visitArray(this.value)},Expression.prototype.eval=function(e){var n,t=this.parens&&!this.parensInOp,r=!1;return t&&e.inParenthesis(),this.value.length>1?n=new Expression(this.value.map(function(n){return n.eval(e)})):1===this.value.length?(this.value[0].parens&&!this.value[0].parensInOp&&(r=!0),n=this.value[0].eval(e)):n=this,t&&e.outOfParenthesis(),this.parens&&this.parensInOp&&!e.isMathOn()&&!r&&(n=new Paren(n)),n},Expression.prototype.genCSS=function(e,n){for(var t=0;t<this.value.length;t++)this.value[t].genCSS(e,n),t+1<this.value.length&&n.add(" ")},Expression.prototype.throwAwayComments=function(){this.value=this.value.filter(function(e){return!(e instanceof Comment)})},module.exports=Expression;
