var Node=require("./node"),URL=function(e,t,a,i){this.value=e,this.currentFileInfo=a,this.index=t,this.isEvald=i};URL.prototype=new Node,URL.prototype.type="Url",URL.prototype.accept=function(e){this.value=e.visit(this.value)},URL.prototype.genCSS=function(e,t){t.add("url("),this.value.genCSS(e,t),t.add(")")},URL.prototype.eval=function(e){var t,a=this.value.eval(e);if(!this.isEvald&&(t=this.currentFileInfo&&this.currentFileInfo.rootpath,t&&"string"==typeof a.value&&e.isPathRelative(a.value)&&(a.quote||(t=t.replace(/[\(\)'"\s]/g,function(e){return"\\"+e})),a.value=t+a.value),a.value=e.normalizePath(a.value),e.urlArgs&&!a.value.match(/^\s*data:/))){var i=-1===a.value.indexOf("?")?"?":"&",l=i+e.urlArgs;-1!==a.value.indexOf("#")?a.value=a.value.replace("#",l+"#"):a.value+=l}return new URL(a,this.index,this.currentFileInfo,!0)},module.exports=URL;
